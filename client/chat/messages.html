<template name='chatroom'>
  {{ #if currentUser }}
    <div class="chatroom">
      <div class="chatroom-title">{{ chatroom.title }}</div>
      <div class="chatroom-messages">
        <ul class="collection">
          {{ #each message in messages }}
            <li class="collection-item avatar">
              <img src="/images/avatar.png" alt="" class="circle">
              <span class="title">{{ message.author }}</span>
              <p><br>{{ message.body }}</p>
            </li>
          {{/each}}
          <!-- {{#if isme message.author }} {{/if}} -->
        </ul>
      </div>
      <div class="chatroom-send-message">
        <form id="send-message-form">
          <div class='input-field'>
            <input type='text' name='message-body' placeholder="Message to send...">
            <input type="submit" id='send-message-button' value='Send message' class='btn' style='width: 100%;'>
          </div>
        </form>
      </div>
    </div>
  {{ else }}
    {{> login}}
  {{ /if }}
</template>

<template name='chat-user-redirect'>
  {{ #if currentUser }}
    {{ done }}
  {{ else }}
    {{> login }}
  {{ /if }}
</template>

<template name='all-chatrooms'>
  <div style="flex-grow: 1">
  {{ #if currentUser }}
    <div class="collection">
      {{ #each chatroom in chatrooms }}
        <a href="/chat/room/{{ chatroom._id }}" class="collection-item avatar">
          <img src="/images/avatar.png" alt="" class="circle">
          <span class="title">
            {{ chatroom.title }}
            <!-- {{ #each email in  }}
              {{ email }},
            {{ /each }} -->
          </span>
          <p><!-- Last message --></p>
        </a>
      {{ /each }}
    </div>
  {{ else }}
    {{> login }}
  {{ /if }}
  </div>
</template>

<template name='new-chatroom'>
  <div style="flex-grow: 1">
  {{ #if currentUser }}
    <form style='padding: 40px;' id='new-chatroom'>
      <h4 style='text-align: center;'>New chatroom</h4>
      <div class="input-field">
        <input name='friend-email' type='text'>
        <label for='friend-email'>Friend's email:</label>
      </div>
      <input type='submit' value='Start chat' class='btn' style='width: 100%'>
    </form>
  {{ else }}
    {{> login }}
  {{ /if }}
  </div>
</template>

<!-- Navbars -->

<template name="chat-topbar">
  <nav>
    <div class="nav-wrapper">
      <a href="#!" class="brand-logo" style="font-size: 18px">KAIST_TUPLE</a>
      <ul class="right">
        <li><a class="waves-effect waves-light btn" href="/chat/new">New</a></li>
      </ul>
    </div>
  </nav>
</template>

<template name="chatroom-topbar">
  <nav>
    <div class="nav-wrapper">
      <ul class="left">
        <li><a class="waves-effect waves-light btn" href="/chat/rooms">Back</a></li>
      </ul>
      <a href="#!" class="brand-logo" style="font-size: 18px">KAIST_TUPLE</a>
    </div>
  </nav>
</template>
